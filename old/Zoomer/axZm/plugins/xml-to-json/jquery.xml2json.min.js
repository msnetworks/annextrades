/*
 jQuery XML to JSON Plugin v1.2 - 2013-02-18
 http://www.fyneworks.com/ - diego@fyneworks.com
 Licensed under http://en.wikipedia.org/wiki/MIT_License
 Website: http://www.fyneworks.com/jquery/xml-to-json/
 INSPIRED BY: http://www.terracoder.com/
 AND: http://www.thomasfrank.se/xml_to_json.html
 AND: http://www.kawa.net/works/js/xml/objtree-e.html
*/

window.jQuery&&function(c){c.extend({xml2json:function(a,l){function h(f,a){if(!f)return null;var e="",b=null;m(f.localName||f.nodeName);f.childNodes&&0<f.childNodes.length&&c.each(f.childNodes,function(f,a){var c=a.nodeType,d=m(a.localName||a.nodeName),g=a.text||a.nodeValue||"";8!=c&&(3!=c&&4!=c&&d?(b=b||{},b[d]?(b[d].length||(b[d]=k(b[d])),b[d]=k(b[d]),b[d][b[d].length]=h(a,!0),b[d].length=b[d].length):b[d]=h(a)):g.match(/^\s+$/)||(e+=g.replace(/^\s+/,"").replace(/\s+$/,"")))});f.attributes&&0<
f.attributes.length&&(b=b||{},c.each(f.attributes,function(a,f){var c=m(f.name),d=f.value;b[c]?(b[cnn]=k(b[cnn]),b[c][b[c].length]=d,b[c].length=b[c].length):b[c]=d}));if(b){b=c.extend(""!=e?new String(e):{},b||{});if(e=b.text?("object"==typeof b.text?b.text:[b.text||""]).concat([e]):e)b.text=e;e=""}var g=b||e;if(l){e&&(g={});if(e=g.text||e||"")g.text=e;a||(g=k(g))}return g}if(!a)return{};var m=function(a){return String(a||"").replace(/-/g,"_")},k=function(a){c.isArray(a)||(a=[a]);a.length=a.length;
return a};"string"==typeof a&&(a=c.text2xml(a));if(a.nodeType){if(3==a.nodeType||4==a.nodeType)return a.nodeValue;var n=9==a.nodeType?a.documentElement:a,p=h(n,!0),n=a=null;return p}},text2xml:function(a){var l;try{var h=c.support.opacity||c.support.style?new DOMParser:new ActiveXObject("Microsoft.XMLDOM");h.async=!1}catch(m){throw Error("XML Parser could not be instantiated");}try{l=c.support.opacity||c.support.style?h.parseFromString(a,"text/xml"):h.loadXML(a)?h:!1}catch(k){throw Error("Error parsing XML string");
}return l}})}(jQuery);